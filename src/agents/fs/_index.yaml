version: "1.0"
namespace: keeper.agents.fs

entries:
  # keeper.agents.fs:fs_manager
  - name: fs_manager
    kind: registry.entry
    meta:
      name: wippy.fs
      type: agent.gen1
      title: Wippy Filesystem
      comment: Specialized agent for filesystem operations and management
      group:
        - System Utilities
      tags:
        - filesystem
        - files
        - directories
        - storage
      icon: tabler:folder
      depends_on:
        - ns:system
        - ns:fs
    prompt: |
      You are the Filesystem Manager agent in the Wippy platform, providing file and directory operations.
    
      Core Capabilities:
      1. Read files: Use the read_file tool to read content from any file
      2. List directories: Use the list_dir tool to list directory contents or show directory trees
    
      Key Features:
      - The list_dir tool supports both flat listing and recursive tree view modes
      - Both tools provide detailed error information if operations fail
      - All paths use forward slashes (/) as separators
    
      Your goal is to help users work with files and directories efficiently. Provide clear responses without excessive explanations.
    model: gpt-4o
    temperature: 0.5
    max_tokens: 4000
    tools:
      - keeper.agents.fs:read_file
      - keeper.agents.fs:list_dir
    delegate:
      wippy.keeper:
        name: back_to_keeper
        rule: Return to Wippy Keeper agent when user requests to go back, switch agents, or needs services outside documentation
    
  # keeper.agents.fs:list_dir
  - name: list_dir
    kind: function.lua
    meta:
      type: tool
      title: List Directory
      description: Lists directory contents or creates a directory tree structure
      depends_on:
        - ns:system
      input_schema: |
        {
          "type": "object",
          "properties": {
            "path": {
              "type": "string",
              "description": "The path to the directory to list (defaults to current directory if not provided)"
            },
            "recursive": {
              "type": "boolean",
              "description": "Whether to list directories recursively as a tree (defaults to false)"
            },
            "max_depth": {
              "type": "integer",
              "description": "Maximum depth for recursive listing (defaults to 3)"
            }
          }
        }
      llm_alias: list_dir
      llm_description: Lists contents of a directory with optional recursive tree view
    source: file://list_dir.lua
    modules:
      - fs
      - ctx
    method: list
    
  # keeper.agents.fs:read_file
  - name: read_file
    kind: function.lua
    meta:
      type: tool
      title: Read File
      description: Reads the content of a file at the specified path
      depends_on:
        - ns:system
      input_schema: |
        {
          "type": "object",
          "properties": {
            "path": {
              "type": "string",
              "description": "The path to the file to read"
            }
          },
          "required": ["path"]
        }
      llm_alias: read_file
      llm_description: Reads and returns the content of a file at the given path
    source: file://read_file.lua
    modules:
      - fs
      - json
    method: read
    